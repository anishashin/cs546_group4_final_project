// IN PROGRESS (please do not edit this file) - Anisha

(function($) {
    $('#error').html('');

    $('#addCommentForm').submit((event) => {
        event.preventDefault();
        const foodId = $('#foodId').val();
        const userId = "61a9b816e26e9c5ef413ef23";
        const text = $('#text').val();
        if(!text || text.trim() === '') {
            $('#error').html('Error: Comment cannot be blank.');
            $('#text').focus();
        } else {
            $('#error').html('');
			var requestConfig = {
				method: 'POST',
				url: '/comments',
                contentType: 'application/json',
                data: JSON.stringify({
                    foodId: foodId,
                    userId: userId,
                    text: text
                })
			};
			$.ajax(requestConfig).then(function(response) {
                $("#addCommentModal").modal('hide');
                $('#addCommentForm').trigger('reset');
			});
        }
    });
})(window.jQuery);